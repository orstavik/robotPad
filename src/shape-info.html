<link rel="import" href="shape-draggable.html">
<link rel="import" href="shape-resizeable.html">
<link rel="import" href="shape-rotatable.html">

<dom-module id="shape-info">
    <template>
        <style>
            :host {
                display: block;
                position: absolute;
                left: 0;
                top: 0;
            }

            #elementControls input {
                width: 30px;
            }

            #elementControls {
                position: fixed;
                bottom: 0;
                left: 0;
            }
        </style>

        <div hidden={{!selected}} id="elementControls">
            <!--<input type="checkbox" id="names" checked on-click="hideNames"/>Show names-->
            <!--<br/>-->
            <input type="text" id="scale" value="{{scale::input}}"/>#
            <br/>
            <input type="text" id="rotate" value="{{rotation::input}}"/>deg
            <br/>
            <input type="text" id="x" value="{{position.x::input}}"/>x
            <br/>
            <input type="text" id="y" value="{{position.y::input}}"/>y
            <!--<br/>-->
            <!--<input type="text" id="z" value="0" on-change="updateElement"/>z-->
            <!--<br/>-->
            <!--<input type="text" id="color" on-change="updateElement"/> <span id="colorTxt">color</span>-->
        </div>
        <shape-draggable id="drag" position="{{position}}">
            <shape-resizeable  id="resize" scale="{{scale}}">
                <shape-rotatable id="rot" rotation="{{rotation}}">
                    <content on-propchange="updatePropInfo"></content>
                </shape-rotatable>
            </shape-resizeable>
        </shape-draggable>

    </template>

    <script>
        Polymer({
            is: 'shape-info',

            properties: {
                position: {
                    type: Array,
                    value: function () {
                        return {x: 0, y: 0};
                    }
                },
                scale: {
                    type: Number,
                    value: 1
                },
                letter: String,
                rotation: {
                    type: Number,
                    value: 0
                },
                selected: {
                    type: Boolean
                }
            },
            getElementInfo: function(){
                return {letter: this.letter, position: this.position, scale: this.scale, rotation: this.rotation};
            },
            updatePropertyFieldsRelative: function (e) {
                var prop = e.detail.propName;
                var prevValue = this[prop];
                this.set(e.detail.propName, prevValue + e.detail.propValue);
            },
            updateAllProperties: function(props){
                this.set("position", props["position"]);
                this.set("scale", props["scale"]);
                this.set("rotation", props["rotation"]);
            }
        });
    </script>
</dom-module>
