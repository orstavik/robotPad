<link rel="import" href="intertext-draggable.html">
<link rel="import" href="intertext-resizeable.html">
<link rel="import" href="intertext-rotatable.html">

<dom-module id="shape-info">
    <template>
        <style>
            :host([selected]) * {
                z-index: 1000
            }

            :host([selected]) ::content * {
                border: 2px solid black;
            }

            :host {
                display: block;
            }
        </style>
        <intertext-draggable id="drag" position="{{input.position}}">
            <intertext-resizeable id="resize" scale="{{input.scale}}">
                <intertext-rotatable id="rot" rotation="{{input.rotation}}">
                    <slot on-propchange="updatePropInfo"></slot>
                </intertext-rotatable>
            </intertext-resizeable>
        </intertext-draggable>
    </template>
    <script>
        class ShapeInfo extends Polymer.Element {
            static get is() {
                return "shape-info";
            }

            static get config() {
                return {
                    properties: {
                        input: Object,
                        selected: {
                            type: Boolean,
                            observer: "updateSelected"
                        }
                    }
                };
            }

            updatePropertyFieldsRelative(e) {
                var prop = e.detail.propName;
                var prevValue = prop === "scale" ? this.input[prop] || 1 : this.input[prop] || 0;
                var value = prevValue + e.detail.propValue;
                this.set("input." + prop, value);
            }

            updateSelected() {
                this.set("input.selected", this.selected);
            }
        }
        customElements.define(ShapeInfo.is, ShapeInfo);
    </script>
</dom-module>
