<dom-module id="shape-info">
    <template>
        <style>
            :host {
                display: block;
                position: absolute;
                left: 0;
                top: 0;
            }

            #elementControls input {
                width: 30px;
            }

            #elementControls {
                position: fixed;
                top: 0;
                right: 0;
            }
        </style>

        <div hidden={{!selected}} id="elementControls">
            <!--<input type="checkbox" id="names" checked on-click="hideNames"/>Show names-->
            <!--<br/>-->
            <input type="text" id="scale" value="{{scale}}"/>#
            <br/>
            <input type="text" id="rotate" value="{{rotation}}"/>deg
            <br/>
            <input type="text" id="x" value="{{position.x::input}}"/>x
            <br/>
            <input type="text" id="y" value="{{position.y::input}}"/>y
            <!--<br/>-->
            <!--<input type="text" id="z" value="0" on-change="updateElement"/>z-->
            <!--<br/>-->
            <!--<input type="text" id="color" on-change="updateElement"/> <span id="colorTxt">color</span>-->
        </div>

        <content on-propchange="updatePropertyFields"></content>
    </template>

    <script>
        Polymer({
            is: 'shape-info',

            properties: {
                position: {
                    type: Array,
                    value: function () {
                        return [0,0];
                    }
                },
                scale: {
                    type: Number,
                    value: 1,
                    observer: "updateStyle"
                },
                letter: String,
                rotation: {
                    type: Number,
                    value: 0,
                    observer: "updateStyle"
                },
                selected: {
                    type: Boolean
                }
            },
            observers: [
                'xChange(position.x)',
                'yChange(position.y)'
            ],
            updatePropertyFields: function (e) {
                this.set(e.detail.propName, e.detail.propValue);
            },
            updatePropertyFieldsRelative: function (e) {
                var prop = e.detail.propName;
                var prevValue = this[prop];
                this.set(e.detail.propName, prevValue + e.detail.propValue);
            },
            xChange: function (x) {
                this.style.left = x + "px";
            },
            yChange: function (y) {
                this.style.top = y + "px";
            },
            updateStyle: function () {
                this.style.transform =
                        "rotate(" + this.rotation + "deg) " +
                        "scale(" + this.scale + ")";
            },
            getElementInfo: function(){
                return {letter: this.letter, position: this.position, scale: this.scale, rotation: this.rotation};
            },
            updateAllProperties: function(props){
                this.set("position", props["position"]);
                this.set("scale", props["scale"]);
                this.set("rotation", props["rotation"]);
            }
        });
    </script>
</dom-module>
