<dom-module id="help-message">
  <template>
    <style>
			:host {
				display: inline-block;
				width: 100%;
				height: 100%;
				position: absolute;
				z-index: 10;
			}
			paper-material {
				display: flex;
				box-sizing: border-box;
				width: 100%;
				height: 100%;
				background: white;
				border-radius: 3px;
				padding: 6px 12px;
				cursor: pointer;
				transform: translateY(0);
			}
			.firstColumn {
				width: 40px;
				flex-shrink: 0;
				margin-right: 8px;
			}
			.secondColumn {
				display: flex;
    		align-items: center;
			}
			span {
				display: inline-block;
				font-size: 13px;
				font-weight: 400;
			}
    </style>

		<paper-material elevation="2">
			<div class="firstColumn">
				<iron-icon icon="help-outline"></iron-icon>
			</div>
			<div class="secondColumn">
				<span>[[value]]</span>
			</div>
		</paper-material>

  </template>
  <script>
    class HelpMessage extends Polymer.Element {
      static get is() {
        return "help-message";
      }

      static get config() {
        return {
          properties: {
            value: {
              type: String
            }
          }
        }
      }

			constructor() {
				super();
				super.ready();
			}

			connectedCallback() {
				this._animate();
			}

			_animate() {
				this.animate({transform: ["scale(0.5)", "scale(1)"], opacity: [0,1]}, {
					duration: 250,
					easing: "cubic-bezier(0.6, 0.03, 0.75, 1.5)",
          fill: "forwards"
				});
				let fading = this.animate({opacity: [1,0]}, {
					delay: 10000,
					duration: 500,
          fill: "forwards"
				});
				fading.onfinish = this.remove.bind(this);
			}

			update(i) {
				this.animate({
					transform: [
						"scale("+(1*Math.pow(0.95,i-2))+") translateY(-"+(12*(i-2))+"px)",
						"scale("+(1*Math.pow(0.95,i-1))+") translateY(-"+(12*(i-1))+"px)"
					]
				}, {
          duration: 200,
          fill: "forwards"
				});
				this.style.zIndex = 10-i;
			}

			show(i) {
				this.animate({
					transform: [
						"scale("+(1*Math.pow(0.95,i-1))+") translateY(-"+(12*(i-1))+"px)",
						"scale(1) translateY(-"+(90*(i-1))+"px)"
					]
				}, {
          duration: 200,
          fill: "forwards"
				});
			}

			hide(i) {
				this.animate({
					transform: [
						"scale(1) translateY(-"+(90*(i-1))+"px)",
						"scale("+(1*Math.pow(0.95,i-1))+") translateY(-"+(12*(i-1))+"px)",
					]
				}, {
          duration: 200,
          fill: "forwards"
				});
			}
    }
    customElements.define(HelpMessage.is, HelpMessage);
  </script>
</dom-module>